"use strict";var v=function(r,e){return function(){return e||r((e={exports:{}}).exports,e),e.exports}};var y=v(function(fe,j){
var b=require('@stdlib/assert-is-buffer/dist'),I=require('@stdlib/assert-is-boolean/dist').isPrimitive,S=require('@stdlib/assert-is-string/dist').isPrimitive,J=require('@stdlib/assert-is-plain-object/dist'),f=require('@stdlib/assert-has-own-property/dist'),c=require('@stdlib/error-tools-fmtprodmsg/dist');function A(r,e){return J(e)?f(e,"html")&&(r.html=e.html,!b(r.html)&&!S(r.html))?new TypeError(c('0kL5v',"html",r.html)):f(e,"javascript")&&(r.javascript=e.javascript,!b(r.javascript)&&!S(r.javascript))?new TypeError(c('0kL5v',"javascript",r.javascript)):f(e,"open")&&(r.open=e.open,!I(r.open))?new TypeError(c('0kL2o',"open",r.open)):null:new TypeError(c('0kL2V',e));}j.exports=A
});var T=v(function(me,C){
var l=require('@stdlib/assert-has-own-property/dist');function K(r){var e={};return l(r,"port")&&(e.port=r.port),l(r,"maxport")&&(e.maxport=r.maxport),l(r,"hostname")&&(e.hostname=r.hostname),l(r,"address")&&(e.address=r.address),e}C.exports=K
});var L=v(function(he,x){
function z(){return{}}x.exports=z
});var R=v(function(pe,F){
var G=require("path").resolve,Q=require("debug"),W=require('@stdlib/utils-keys/dist'),X=require('@stdlib/net-http-server/dist'),Y=require('@stdlib/fs-read-file/dist').sync,O=require('@stdlib/assert-is-string/dist').isPrimitive,Z=require('@stdlib/assert-is-function/dist'),$=require('@stdlib/utils-open-url/dist'),ee=require('@stdlib/utils-noop/dist'),w=require('@stdlib/buffer-ctor/dist').byteLength,E=require('@stdlib/buffer-from-string/dist'),H=require('@stdlib/utils-next-tick/dist'),re=require('@stdlib/process-node-version/dist'),te=require('@stdlib/error-tools-fmtprodmsg/dist'),ne=y(),ie=T(),ae=L(),a=Q("disposable-http-server"),oe=parseInt(re.split(".")[0],10)<6;function ue(r,e){a("Sending 404 response..."),e.statusCode=404,e.end()}function se(r,e){a("Sending 503 response..."),e.statusCode=503,e.end()}function ve(){a("Server closed.")}function P(r){return w(oe?r:r.toString())}function ce(r){var e,m,u,h,p,s,g,i,d;if(i={},arguments.length>1){if(s=arguments[1],!Z(s))throw new TypeError(te('0kL2b',s))}else s=ee;if(d=ne(i,r),d)throw d;i.html&&O(i.html)&&(i.html=E(i.html)),i.javascript&&O(i.javascript)&&(i.javascript=E(i.javascript)),h=ie(r),a("Serving provided content."),i.html||(a("No HTML content provided."),a("Loading a boilerplate HTML page..."),p=G(__dirname,"static/index.html"),i.html=Y(p)),g=X(h,M),a("Starting server..."),g(k),e=ae();function k(n,t){var o;if(n)throw n;a("Server started."),u=t,u.on("connection",B),u.once("close",ve),i.open&&(o=u.address(),$("http://"+o.address+":"+o.port)),s(null,u)}function B(n){var t=n.remoteAddress+":"+n.remotePort;a("Received a socket connection: %s.",t),e[t]=n,n.on("close",o);function o(){a("Socket connection closed: %s.",t),delete e[t]}}function M(n,t){if(a("Received a request for %s",n.url),m)return se(n,t);if(n.url==="/bundle.js")return H(o(D)),t.once("finish",q);if(n.url!=="/"&&n.url!=="/index.html")return ue(n,t);H(o(_)),i.javascript||t.once("finish",q);function o(U){return V;function V(){U(n,t)}}}function _(n,t){a("Sending HTML..."),t.statusCode=200,t.setHeader("Content-Type","text/html"),t.setHeader("Content-Length",P(i.html)),t.end(i.html)}function D(n,t){a("Sending JavaScript..."),t.statusCode=200,t.setHeader("Content-Type","text/javascript"),t.setHeader("Content-Length",P(i.javascript)),t.end(i.javascript)}function q(){a("Finished serving content."),m=!0,a("Closing the server..."),u.close(),setTimeout(N,5e3)}function N(){var n,t;for(a("Destroying all connections..."),n=W(e),t=0;t<n.length;t++)a("Destroying connection %s...",n[t]),e[n[t]].destroy()}}F.exports=ce
});var le=R();module.exports=le;
/** @license Apache-2.0 */
//# sourceMappingURL=index.js.map
